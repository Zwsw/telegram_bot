from telethon import TelegramClient, errors
import asyncio  
from telethon.tl.functions.channels import JoinChannelRequest  # üìå –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã

# ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–≤–æ–∏ API-–∫–ª—é—á–∏ –ø—É–±–ª–∏—á–Ω–æ!
api_id = 24586867   
api_hash = "c74a1a9426f345c05ef9ac223f4e15ed"  

client = TelegramClient("/root/telegram_bot/my_session", api_id, api_hash)

# üìå –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
async def check_session():
    if not await client.is_user_authorized():
        print("‚ö†Ô∏è –ë–æ—Ç –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram-—Å–µ—Å—Å–∏—é.")
        await client.start()  # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∞–∫–∫–∞—É–Ω—Ç—É
        if not await client.is_user_authorized():
            print("‚ùå –û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç.")
            return False
    return True

async def send_message():
    await client.start()  # üìå –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

    messages = [
        (-1002155201582, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –∞–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1002120460328, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –∞–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1002037221561, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –∞–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1001632685691, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –∞–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1001554811744, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1001305009781, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1001618705872, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74 (–≥–∞—Ä–∞–Ω—Ç: @Legion_Guarantor_Bot)"),
        (-1001996032429, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74 –≥–∞—Ä–∞–Ω—Ç @Freedom_Garant_Bot"),
        (-1001855792924, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1002374585006, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1001894640231, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74"),
        (-1001425395464, "üì≤–ü–ª–∞—á—É 110‚ÇΩ –∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –ê–≤–∏—Ç–æ\nüìù–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å –æ—Ç 550‚ÇΩ –∑–∞ 10-15 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã\n‚ö°Ô∏è–ø–∏—Å–∞—Ç—å @zwsw_74 –ì–∞—Ä–∞–Ω—Ç @atlantis_grntbot"),
    ]

    for channel_id, message_text in messages:
        try:
            entity = await client.get_entity(channel_id)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞
            await client.send_message(entity, message_text)
            print(f"‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–∞–Ω–∞–ª {channel_id}")

            # ‚è≥ –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (15 —Å–µ–∫)
            await asyncio.sleep(15)

        except errors.FloodWaitError as e:
            print(f"‚è≥ Telegram —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å {e.seconds} —Å–µ–∫—É–Ω–¥! –ñ–¥–µ–º...")
            await asyncio.sleep(e.seconds)

        except errors.ChatWriteForbiddenError:
            print(f"‚ùå –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤ {channel_id}. –í–æ–∑–º–æ–∂–Ω–æ, –±–æ—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.")

        except errors.ChannelPrivateError:
            print(f"‚ö†Ô∏è –ë–æ—Ç –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –∫–∞–Ω–∞–ª {channel_id}. –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è...")
            try:
                await client(JoinChannelRequest(channel_id))
                print(f"‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ {channel_id} —É—Å–ø–µ—à–Ω–∞.")
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ {channel_id}: {e}")

        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –≤ {channel_id}: {e}")

async def main():
    await client.start()

    # üìå –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è
    if not await check_session():
        return

    while True:
        await send_message()
        print("‚è≥ –ñ–¥–µ–º 1,5 —á–∞—Å–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π —Ä–∞—Å—Å—ã–ª–∫–æ–π...")
        await asyncio.sleep(5400)  # 1,5 —á–∞—Å–∞ (5400 —Å–µ–∫—É–Ω–¥)

with client:
    client.loop.run_until_complete(main())
